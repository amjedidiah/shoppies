(this["webpackJsonpshoppies-client"]=this["webpackJsonpshoppies-client"]||[]).push([[0],{41:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),i=n(11),r=n.n(i),c=n(3),s=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function l(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var d=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,68)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),i(e),r(e)}))},u=n(6),m=n(8),h=n(7),j=(n(41),n(9)),b=n(30),p=function(e,t){return g(t).filter((function(t){var n=t.userID;return e===n}))},f=function(e,t,n){return p(e,n).map((function(e){return e.imdbID})).includes(t)},v=function(e,t){return(null===t||void 0===t?void 0:t.userID)===e},g=function(e){var t=e.dbNom,n=e.storeNom;return("nominate"===n.action?[].concat(Object(b.a)(t),[null===n||void 0===n?void 0:n.nomination]):t.filter((function(e){var t,a;return e.imdbID!==(null===n||void 0===n||null===(t=n.nomination)||void 0===t?void 0:t.imdbID)&&e.userID!==(null===n||void 0===n||null===(a=n.nomination)||void 0===a?void 0:a.userID)}))).sort((function(e,t){return e.createdAt<t.createdAt?1:t.createdAt<e.createdAt?-1:0}))},O=n(12),x=n.n(O),N=x.a.create({baseURL:"https://my-shoppies-api.herokuapp.com/api",timeout:6e4}),w=function(e){return{type:"RECEIVE_NOMINATIONS",nominations:e}},y=function(e){return Object(a.jsx)("div",{children:Object(a.jsx)("p",{className:"my-2",children:["cancel","nominate"].map((function(t){var n="cancel"===t?"danger":"success",o=e.ifNominatedByAuthedUser&&"cancel"===t||!e.ifNominatedByAuthedUser&&!e.ifInMyNominations&&"nominate"===t;return Object(a.jsxs)("button",{className:"btn btn-outline-".concat(n," ").concat(!o&&"d-none"," rounded-pill text-uppercase"),type:"button",onClick:function(n){return e.handleUpdateNominations(t,{userID:e.authedUser,imdbID:e.imdbID})},children:[Object(a.jsx)("span",{className:"mr-2",children:"cancel"===t?Object(a.jsx)(j.d,{}):Object(a.jsx)(j.c,{})}),t]},t)}))})})};y.defaultProps={authedUser:"",handleUpdateNominations:function(){},ifInMyNominations:!1,ifNominatedByAuthedUser:!1,imdbID:""};var I=Object(c.connect)((function(e,t){var n=e.authedUser,a=e.nominations,o=t.imdbID;return{authedUser:n,ifInMyNominations:f(n,o,a)}}),{handleUpdateNominations:function(e,t){return function(n,a){var o=a(),i=o.authedUser,r=o.nominations,c=p(i,r);return"nominate"===e&&5===c.length?alert("The maximum amount of nominations is 5"):(n(function(e,t){return{type:"nominate"===e?"SAVE_NOMINATION":"REMOVE_NOMINATION",action:e,nomination:t}}(e,t)),N["nominate"===e?"post":"delete"]("/nominations".concat("cancel"===e?"?imdbID=".concat(t.imdbID,"&&userID=").concat(t.userID):""),t).then((function(e){var t=e.data;return n(w(t.data))})).catch((function(e){return console.log(e)})).finally((function(){return n({type:"RESOLVE_NOMINATIONS"})})))}}})(y),D=x.a.create({baseURL:"http://www.omdbapi.com",timeout:6e4}),S=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={movie:{}},e.fetchMovie=function(t){return D.get("/?apikey=ce4b5ffd",{params:{i:t}}).then((function(t){var n=t.data;return e.setState((function(){return{movie:n}}))})).catch((function(e){return console.log(e)}))},e.componentDidMount=function(){var t=e.props,n=t.imdbID,a=t.movie;return n?e.fetchMovie(n):e.setState((function(){return{movie:a}}))},e.render=function(){var t=e.state.movie,n=t.Genre,o=t.imdbID,i=t.Poster,r=t.Title,c=t.Year,s=e.props,l=s.ifInMyNominations,d=s.ifNominatedByAuthedUser,u=s.nomination,m=s.xtraClassName;return Object(a.jsxs)("div",{className:"bg-white ".concat(null===m||void 0===m?void 0:m.card),children:[i&&"N/A"!==i&&Object(a.jsx)("div",{className:"img-holder",children:Object(a.jsx)("img",{src:i,className:"img-fluid ".concat(null===m||void 0===m?void 0:m.img),alt:r,srcSet:"".concat(i," 4.18x"),width:"100"})}),Object(a.jsxs)("div",{className:null===m||void 0===m?void 0:m.info,children:[Object(a.jsx)("p",{className:"lead text-truncate",children:Object(a.jsx)("strong",{children:r})}),Object(a.jsx)("p",{className:"text-truncate",children:Object(a.jsxs)("span",{className:"badge badge-primary--custom text-white",children:[c," ",e.props.imdbID&&" | ".concat(n)]})}),e.props.imdbID&&Object(a.jsxs)("p",{className:"text-right",children:["by ",d?"me":null===u||void 0===u?void 0:u.userID]}),Object(a.jsx)(I,{ifNominatedByAuthedUser:e.props.imdbID?d:l,imdbID:o})]})]})},e}return n}(o.Component);S.defaultProps={ifNominatedByAuthedUser:!1,imdbID:"",movie:{},nomination:{},xtraClassName:{}};var U=Object(c.connect)((function(e,t){var n=e.authedUser,a=e.nominations,o=t.movie,i=t.nomination;return{ifInMyNominations:f(n,null===o||void 0===o?void 0:o.imdbID,a),ifNominatedByAuthedUser:v(n,i)}}))(S),A=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={page:1,results:[],s:"",status:"Type at least 3 characters to trigger a search...",totalResults:0},e.search=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.s;arguments.length>1&&void 0!==arguments[1]||e.state.page;return e.setState({results:[],status:"Loading movie results",totalResults:0},(function(){return D.get("/?apikey=ce4b5ffd",{params:{s:t,page:e.state.page}}).then((function(t){var n=t.data,a=n.Search;return e.setState((function(){return a?{results:a,status:"Type at least 3 characters to trigger a search...",totalResults:n.totalResults}:{status:n.Error}}))})).catch((function(t){return e.setState((function(){return{results:[],status:"Movie not found!",totalResults:0}}),(function(){return console.log(t)}))}))}))},e.setPage=function(t){return e.setState((function(e){var n=e.page;return{page:"prev"===t?n-1:n+1}}),(function(){return e.search()}))},e.render=function(){var t=e.state,n=t.page,o=t.results,i=t.status,r=t.totalResults;return Object(a.jsx)("form",{className:"form-inline form--header flex-grow-1 mr-lg-5",children:Object(a.jsxs)("div",{className:"input-group input-group--custom input--search rounded-pill",children:[Object(a.jsx)("div",{className:"input-group-prepend--custom border-0 py-2",children:Object(a.jsx)("div",{className:"input-group-text bg-transparent border-0 text-primary--custom",children:Object(a.jsx)("i",{className:"fas fa-search"})})}),Object(a.jsx)("input",{type:"search",className:"form-control form-control--custom rounded-pill py-1 dropdown-toggle",placeholder:"Search movie...","aria-label":"Search",id:"dropdownSearchInput","data-toggle":"dropdown","aria-haspopup":"true",onChange:function(t){var n=t.target;return e.setState((function(){return{s:n.value,results:[],status:"Type at least 3 characters to trigger a search..."}}),(function(){return n.value.length>2&&e.search(n.value)}))}}),Object(a.jsx)("ul",{className:"dropdown-menu dropdown-menu-bottom p-4 w-100 rounded","aria-labelledby":"dropdownSearchInput",children:o.length>0?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("li",{className:"dropdown-header px-0 text-uppercase",children:"Related movies"}),o.map((function(e){return Object(a.jsxs)("li",{className:"dropdown-item p-0 mb-3",children:[Object(a.jsx)(U,{movie:e,xtraClassName:{card:"d-flex align-items-start",img:"img-fluid--search ${3|rounded-top,rounded-right,rounded-bottom,rounded-left,rounded-circle,|}",info:"p-3"}}),Object(a.jsx)("div",{className:"dropdown-divider"})]},null===e||void 0===e?void 0:e.imdbID)})),Object(a.jsx)("p",{children:["prev","next"].map((function(t){return("prev"===t&&1!==n||"next"===t&&0!==r&&n<=Math.floor(r/10))&&Object(a.jsx)("button",{className:"btn btn-outline--primary-2 btn-prop ml-auto",type:"button",onClick:function(n){n.stopPropagation(),e.setPage(t)},children:t},t)}))})]}):Object(a.jsx)("li",{className:"dropdown-text px-0",children:i})})]})})},e}return n}(o.Component),E=n.p+"static/media/logo.fd535fbe.png",k=(n(60),function(){return Object(a.jsx)("header",{children:Object(a.jsx)("nav",{className:"navbar navbar-expand navbar-light bg-transparent fixed-top",id:"header",children:Object(a.jsxs)("div",{className:"container d-flex align-items-center",children:[Object(a.jsx)("a",{className:"navbar-brand d-block just-height",href:"/#",children:Object(a.jsx)("img",{src:E,alt:"Shoppies logo",className:"img-fluid",width:"100",loading:"lazy"})}),Object(a.jsx)(A,{}),Object(a.jsx)("ul",{className:"navbar-nav mr-auto ml-auto",children:Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)("a",{className:"nav-link nav-link--custom",href:"#nominations",children:"Nominations"})})})]})})})}),T=n.p+"static/media/award1.7a972d81.png",M=(n(61),function(){return Object(a.jsxs)("section",{className:"jumbotron jumbotron-fluid bg-primary--custom text-white",children:[Object(a.jsx)("h2",{className:"d-none",children:"Jumbotron"}),Object(a.jsx)("article",{className:"container h-100",children:Object(a.jsxs)("div",{className:"row align-items-center h-100",children:[Object(a.jsxs)("div",{className:"col-12 col-lg-7",children:[Object(a.jsxs)("h3",{className:"jumbo-title",children:["Shoppies"," ",Object(a.jsx)("span",{className:"award-text text-primary--custom--2 font-weight-bold",children:"Award"}),Object(a.jsx)("span",{className:"p-1 p-sm-2 bg-primary--custom--2 just-width just-height d-inline-block"})]}),Object(a.jsx)("p",{className:"lead my-4",children:"Search a movie to nominate for the Shoppies award, or nominate one from our recent nominations"}),Object(a.jsx)("p",{children:"We honour the best. Every movie has a story, but a few become epics. These are the ones we honour."})]}),Object(a.jsx)("div",{className:"d-none d-lg-block col-lg offset-lg-1",children:Object(a.jsx)("div",{className:"img-holder pt-xl-5",children:Object(a.jsx)("img",{src:T,className:"img-fluid",alt:"award"})})})]})})]})}),R=(n(62),function(e){var t=e.authedUser,n=e.authedUserNominations,o=e.nominations,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.length>0?e.map((function(e){return Object(a.jsx)("div",{className:"mb-4 nomination ".concat(t),children:Object(a.jsx)(U,{imdbID:null===e||void 0===e?void 0:e.imdbID,nomination:e,xtraClassName:{card:"shadow",img:"w-100",info:"p-2"}})},null===e||void 0===e?void 0:e._id)})):Object(a.jsx)("p",{children:"Nominate up to 5 movies to see them here..."})};return Object(a.jsxs)("section",{id:"nominations",children:[Object(a.jsx)("h2",{className:"d-none",children:"Nominations"}),Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-12 col-lg",children:Object(a.jsxs)("div",{className:"my-3 rounded",children:[Object(a.jsx)("h4",{className:"text-gold font-weight-bold",children:"Recent Nominations"}),Object(a.jsx)("div",{className:"d-flex flex-wrap mt-3 row--nomination",children:i(o)})]})}),t&&Object(a.jsx)("div",{className:"col-12 col-lg-3 col-xl-5",id:"myNominations",children:Object(a.jsxs)("div",{className:"my-3 rounded",children:[Object(a.jsx)("h4",{className:"text-gold font-weight-bold",children:"Your Nominations"}),Object(a.jsx)("div",{className:"d-flex flex-wrap mt-3 row--nomination",children:i(n,"nomination--yours")})]})})]})})]})});R.defaultProps={authedUser:"",authedUserNominations:[],nominations:[]};var C=Object(c.connect)((function(e){var t=e.authedUser,n=e.nominations;return{authedUser:t,authedUserNominations:p(t,n),nominations:g(n)}}))(R),B=function(){return Object(a.jsx)("footer",{children:Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("div",{className:"d-flex shadow bg-white p-3",children:[Object(a.jsx)("div",{className:"flex-grow-1",children:"amjedidiah \xa9 2021"}),Object(a.jsxs)("div",{className:"text-right",children:[Object(a.jsx)("a",{href:"https://github.com/amjedidiah",className:"mr-3 large text-primary--custom-2",children:Object(a.jsx)("span",{"aria-label":"Github",className:"text-primary--custom-2",children:Object(a.jsx)(j.a,{})})}),Object(a.jsx)("a",{href:"https://www.linkedin.com/in/am-jedidiah/",className:"mr-3 large text-primary--custom-2",children:Object(a.jsx)("span",{"aria-label":"LinkedIn",className:"text-primary--custom-2",children:Object(a.jsx)(j.b,{})})})]})]})})})},P=n(13),_=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*a));return t},L=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).componentDidMount=function(){return e.props.handleInitialData()},e.render=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(k,{}),Object(a.jsxs)("main",{children:[Object(a.jsx)(M,{}),Object(a.jsx)(C,{})]}),Object(a.jsx)(B,{})]})},e}return n}(o.Component),W=Object(c.connect)(null,{handleInitialData:function(){return function(e){return e(Object(P.showLoading)()),e((function(e,t){if(!t().authedUser){var n=_(12);return localStorage.setItem("authedUser",n),{type:"SET_AUTHED_USER",userID:n}}})),N.get("/nominations").then((function(t){var n=t.data;return e(w(n.data))})).catch((function(e){return console.log(e)}))}}})(L),V=(n(66),n(5)),F=function(){var e=arguments.length>1?arguments[1]:void 0;return{SET_AUTHED_USER:e.userID}[e.type]||localStorage.getItem("authedUser")},J=n(4),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dbNom:[],storeNom:{}},t=arguments.length>1?arguments[1]:void 0;return console.log(t,e),{RECEIVE_NOMINATIONS:Object(J.a)(Object(J.a)({},e),{},{dbNom:t.nominations,storeNom:{}}),SAVE_NOMINATION:Object(J.a)(Object(J.a)({},e),{},{storeNom:{action:t.action,nomination:t.nomination}}),REMOVE_NOMINATION:Object(J.a)(Object(J.a)({},e),{},{storeNom:{action:t.action,nomination:t.nomination}}),RESOLVE_NOMINATIONS:Object(J.a)(Object(J.a)({},e),{},{storeNom:{}})}[t.type]||e},H=Object(V.c)({authedUser:F,loadingBar:P.loadingBarReducer,nominations:G}),Y=n(29),z=function(e){return function(t){return function(n){console.group(n.type),console.log("The action: ",n);var a=t(n);return console.log("The new state: ",e.getState()),console.groupEnd(),a}}},$=Object(V.a)(Y.a,z),q=Object(V.d)(H,$);r.a.render(Object(a.jsx)(c.Provider,{store:q,children:Object(a.jsx)(W,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/shoppies",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/shoppies","/service-worker.js");s?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):l(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):l(t,e)}))}}(),d()}},[[67,1,2]]]);
//# sourceMappingURL=main.46c9c966.chunk.js.map